<?xml version="1.0"?>
<launch>
        <arg name="vehicle_frame" default="cf1" />

<!-- VEHICLE 1 -->
<group ns="$(arg vehicle_frame)">
<!--
===========================================================================
Run the data aggregator node, which takes the information from external 
sensors and provides an estimator of the drone state.
-->
<node pkg="state_aggregator" name="aggregator" type="state_aggregator" 
        respawn="true"
        respawn_delay="3"
        output="screen"> 
        <!-- Topic parameters -->
        <param name="sigmax" value="0.1" type='double' />
        <param name="sigmay" value="0.001" type='double' />

        

        <param name="topics/out_ext_position_topic" value="external_position" />
        <param name="topics/out_ext_pose_topic" value="external_pose" />
        <param name="topics/out_ext_pose_rpy_topic" value="external_pose_rpy" />
        <param name="topics/out_ext_odom_topic" value="external_odom" />
	    <param name="topics/out_ext_codom_topic" value="external_codom" />

    	<param name="time_delay" value="0.0" type='double' />
</node>
</group>


<node pkg="rosbag" name="mocap_$(arg vehicle_frame)" type="record" args="-O /tmp/$(arg vehicle_frame)_mocap  /$(arg vehicle_frame)/external_codom /$(arg vehicle_frame)/rs_codom /area0/sensors/gtrack/cf3/data /area0/sensors/optitrack/cf3/data"/>

</launch>


